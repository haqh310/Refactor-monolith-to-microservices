{"ast":null,"code":"import _asyncToGenerator from \"E:/cd0354-monolith-to-microservices-project/udagram-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { FeedItem } from '../models/feed-item.model';\nimport { BehaviorSubject } from 'rxjs';\nimport { ApiService } from '../../api/api.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../api/api.service\";\nexport let FeedProviderService = /*#__PURE__*/(() => {\n  class FeedProviderService {\n    constructor(api) {\n      this.api = api;\n      this.currentFeed$ = new BehaviorSubject([]);\n    }\n    getFeed() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const req = yield _this.api.get('/feed');\n        const items = req.rows;\n        _this.currentFeed$.next(items);\n        return Promise.resolve(_this.currentFeed$);\n      })();\n    }\n    uploadFeedItem(caption, file) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        const res = yield _this2.api.upload('/feed', file, {\n          caption: caption,\n          url: file.name\n        });\n        const feed = [res, ..._this2.currentFeed$.value];\n        _this2.currentFeed$.next(feed);\n        return res;\n      })();\n    }\n    static #_ = this.ɵfac = function FeedProviderService_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || FeedProviderService)(i0.ɵɵinject(i1.ApiService));\n    };\n    static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: FeedProviderService,\n      factory: FeedProviderService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n  return FeedProviderService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}